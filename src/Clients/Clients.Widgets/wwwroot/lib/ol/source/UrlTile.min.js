/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/ol@8.1.0/source/UrlTile.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import TileEventType from"./TileEventType.js";import TileSource,{TileSourceEvent}from"./Tile.js";import TileState from"../TileState.js";import{createFromTemplates,expandUrl}from"../tileurlfunction.js";import{getKeyZXY}from"../tilecoord.js";import{getUid}from"../util.js";class UrlTile extends TileSource{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=getUid(e),l=e.getState();let n;l==TileState.LOADING?(this.tileLoadingKeys_[i]=!0,n=TileEventType.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],n=l==TileState.ERROR?TileEventType.TILELOADERROR:l==TileState.LOADED?TileEventType.TILELOADEND:void 0),null!=n&&this.dispatchEvent(new TileSourceEvent(n,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=expandUrl(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const l=getKeyZXY(t,e,i);this.tileCache.containsKey(l)&&this.tileCache.get(l)}}export default UrlTile;
//# sourceMappingURL=/sm/39336115050a16c463851b18979e841e0d5c30f542a516c67c12254f671de61b.map