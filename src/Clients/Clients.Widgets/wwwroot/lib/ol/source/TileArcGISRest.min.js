/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/ol@8.1.0/source/TileArcGISRest.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import TileImage from"./TileImage.js";import{createEmpty}from"../extent.js";import{getRequestUrl}from"./arcgisRest.js";import{modulo}from"../math.js";import{scale as scaleSize,toSize}from"../size.js";import{hash as tileCoordHash}from"../tilecoord.js";class TileArcGISRest extends TileImage{constructor(t){super({attributions:(t=t||{}).attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.params_=t.params||{},this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=createEmpty(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}getParams(){return this.params_}getRequestUrl_(t,e,i,r,s,o){const a=this.urls;if(!a)return;let l;if(1==a.length)l=a[0];else{l=a[modulo(tileCoordHash(t),a.length)]}return getRequestUrl(l,i,(this.tileGrid||this.getTileGridForProjection(s)).getResolution(t[0]),r,s,o)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,e,i){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),r.getResolutions().length<=t[0])return;1==e||this.hidpi_||(e=1);const s=r.getTileCoordExtent(t,this.tmpExtent_);let o=toSize(r.getTileSize(t[0]),this.tmpSize);1!=e&&(o=scaleSize(o,e,this.tmpSize));const a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(t,o,s,e,i,a)}}export default TileArcGISRest;
//# sourceMappingURL=/sm/e6e70142b6cc0035b54e489487a622ed4d29837e8729e6b26506ca36dfb8d700.map