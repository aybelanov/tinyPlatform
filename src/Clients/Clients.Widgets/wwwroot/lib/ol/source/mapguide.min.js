/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/ol@8.1.0/source/mapguide.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{appendParams}from"../uri.js";import{decode}from"../Image.js";import{getCenter,getHeight,getWidth}from"../extent.js";import{getRequestExtent}from"./Image.js";function getScale(e,t,r,n){const o=getWidth(e),i=getHeight(e),s=t[0],E=t[1],a=.0254/n;return E*o>s*i?o*r/(s*a):i*r/(E*a)}function getUrl(e,t,r,n,o,i,s){const E=getScale(r,n,i,s),a=getCenter(r),g={OPERATION:o?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:s,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:E,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return Object.assign(g,t),appendParams(e,g)}export function createLoader(e){const t=e.load||decode;return function(r,n,o){const i=new Image;null!==e.crossOrigin&&(i.crossOrigin=e.crossOrigin),r=getRequestExtent(r,n,o,e.ratio);const s=getWidth(r)/n,E=getHeight(r)/n,a=[s*o,E*o],g=getUrl(e.url,e.params,r,a,e.useOverlay,e.metersPerUnit||1,e.displayDpi||96);return t(i,g).then((e=>({image:e,extent:r,pixelRatio:o})))}}
//# sourceMappingURL=/sm/811349a98490181c3f48d5fcc1edcb9ed932dfa0bc38200195196d8900d81bfa.map