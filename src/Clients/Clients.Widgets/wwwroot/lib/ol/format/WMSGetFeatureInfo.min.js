/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/ol@8.1.0/format/WMSGetFeatureInfo.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import GML2 from"./GML2.js";import XMLFeature from"./XMLFeature.js";import{extend}from"../array.js";import{makeArrayPusher,makeStructureNS,pushParseAndPop}from"../xml.js";const featureIdentifier="_feature",layerIdentifier="_layer";class WMSGetFeatureInfo extends XMLFeature{constructor(e){super(),e=e||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new GML2,this.layers_=e.layers?e.layers:null}getLayers(){return this.layers_}setLayers(e){this.layers_=e}readFeatures_(e,t){e.setAttribute("namespaceURI",this.featureNS_);const r=e.localName;let s=[];if(0===e.childNodes.length)return s;if("msGMLOutput"==r)for(let r=0,a=e.childNodes.length;r<a;r++){const a=e.childNodes[r];if(a.nodeType!==Node.ELEMENT_NODE)continue;const o=a,u=t[0],n="_layer",i=o.localName.replace(n,"");if(this.layers_&&!this.layers_.includes(i))continue;const l=i+"_feature";u.featureType=l,u.featureNS=this.featureNS_;const m={};m[l]=makeArrayPusher(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const c=makeStructureNS([u.featureNS,null],m);o.setAttribute("namespaceURI",this.featureNS_);const h=pushParseAndPop([],c,o,t,this.gmlFormat_);h&&extend(s,h)}if("FeatureCollection"==r){const t=pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);t&&(s=t)}return s}readFeaturesFromNode(e,t){const r={};return t&&Object.assign(r,this.getReadOptions(e,t)),this.readFeatures_(e,[r])}}export default WMSGetFeatureInfo;
//# sourceMappingURL=/sm/97b5ae07722a3c6d04f0d38e1bf0818a6447e5e2859edb6576425cb8e6423bc7.map