/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/ol@8.1.0/format/GeoJSON.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Feature from"../Feature.js";import GeometryCollection from"../geom/GeometryCollection.js";import JSONFeature from"./JSONFeature.js";import LineString from"../geom/LineString.js";import MultiLineString from"../geom/MultiLineString.js";import MultiPoint from"../geom/MultiPoint.js";import MultiPolygon from"../geom/MultiPolygon.js";import Point from"../geom/Point.js";import Polygon from"../geom/Polygon.js";import{get as getProjection}from"../proj.js";import{isEmpty}from"../obj.js";import{transformGeometryWithOptions}from"./Feature.js";class GeoJSON extends JSONFeature{constructor(e){e=e||{},super(),this.dataProjection=getProjection(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=getProjection(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;r="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null};const o=readGeometry(r.geometry,t),i=new Feature;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&i.setGeometryName(r.geometry_name),i.setGeometry(o),"id"in r&&i.setId(r.id),r.properties&&i.setProperties(r.properties,!0),i}readFeaturesFromObject(e,t){let r=null;if("FeatureCollection"===e.type){r=[];const o=e.features;for(let e=0,i=o.length;e<i;++e)r.push(this.readFeatureFromObject(o[e],t))}else r=[this.readFeatureFromObject(e,t)];return r}readGeometryFromObject(e,t){return readGeometry(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if("name"==t.type)r=getProjection(t.properties.name);else{if("EPSG"!==t.type)throw new Error("Unknown SRS type");r=getProjection("EPSG:"+t.properties.code)}else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},o=e.getId();if(void 0!==o&&(r.id=o),!e.hasProperties())return r;const i=e.getProperties(),n=e.getGeometry();return n&&(r.geometry=writeGeometry(n,t),delete i[e.getGeometryName()]),isEmpty(i)||(r.properties=i),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let o=0,i=e.length;o<i;++o)r.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return writeGeometry(e,this.adaptOptions(t))}}function readGeometry(e,t){if(!e)return null;let r;switch(e.type){case"Point":r=readPointGeometry(e);break;case"LineString":r=readLineStringGeometry(e);break;case"Polygon":r=readPolygonGeometry(e);break;case"MultiPoint":r=readMultiPointGeometry(e);break;case"MultiLineString":r=readMultiLineStringGeometry(e);break;case"MultiPolygon":r=readMultiPolygonGeometry(e);break;case"GeometryCollection":r=readGeometryCollectionGeometry(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return transformGeometryWithOptions(r,!1,t)}function readGeometryCollectionGeometry(e,t){const r=e.geometries.map((function(e){return readGeometry(e,t)}));return new GeometryCollection(r)}function readPointGeometry(e){return new Point(e.coordinates)}function readLineStringGeometry(e){return new LineString(e.coordinates)}function readMultiLineStringGeometry(e){return new MultiLineString(e.coordinates)}function readMultiPointGeometry(e){return new MultiPoint(e.coordinates)}function readMultiPolygonGeometry(e){return new MultiPolygon(e.coordinates)}function readPolygonGeometry(e){return new Polygon(e.coordinates)}function writeGeometry(e,t){const r=(e=transformGeometryWithOptions(e,!0,t)).getType();let o;switch(r){case"Point":o=writePointGeometry(e,t);break;case"LineString":o=writeLineStringGeometry(e,t);break;case"Polygon":o=writePolygonGeometry(e,t);break;case"MultiPoint":o=writeMultiPointGeometry(e,t);break;case"MultiLineString":o=writeMultiLineStringGeometry(e,t);break;case"MultiPolygon":o=writeMultiPolygonGeometry(e,t);break;case"GeometryCollection":o=writeGeometryCollectionGeometry(e,t);break;case"Circle":o={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return o}function writeGeometryCollectionGeometry(e,t){delete(t=Object.assign({},t)).featureProjection;return{type:"GeometryCollection",geometries:e.getGeometriesArray().map((function(e){return writeGeometry(e,t)}))}}function writeLineStringGeometry(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function writeMultiLineStringGeometry(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function writeMultiPointGeometry(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function writeMultiPolygonGeometry(e,t){let r;return t&&(r=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}function writePointGeometry(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function writePolygonGeometry(e,t){let r;return t&&(r=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(r)}}export default GeoJSON;
//# sourceMappingURL=/sm/bb9aab8a96600135aaaf1a7c65334f3e2e715ac7590f339d359436987064a2de.map