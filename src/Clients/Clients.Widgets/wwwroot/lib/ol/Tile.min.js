/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/ol@8.1.0/Tile.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import EventTarget from"./events/Target.js";import EventType from"./events/EventType.js";import TileState from"./TileState.js";import{abstract}from"./util.js";import{easeIn}from"./easing.js";class Tile extends EventTarget{constructor(t,i,e){super(),e=e||{},this.tileCoord=t,this.state=i,this.interimTile=null,this.key="",this.transition_=void 0===e.transition?250:e.transition,this.transitionStarts_={},this.interpolate=!!e.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.state===TileState.ERROR&&this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==TileState.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,i=this;do{if(t.getState()==TileState.LOADED){t.interimTile=null;break}t.getState()==TileState.LOADING?i=t:t.getState()==TileState.IDLE?i.interimTile=t.interimTile:i=t,t=i.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==TileState.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){abstract()}getAlpha(t,i){if(!this.transition_)return 1;let e=this.transitionStarts_[t];if(e){if(-1===e)return 1}else e=i,this.transitionStarts_[t]=e;const r=i-e+1e3/60;return r>=this.transition_?1:easeIn(r/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}export default Tile;
//# sourceMappingURL=/sm/9f82dfde58d9b81a6cb5c9ef6b6875b367c22ffa50664feffbb3b890329b2520.map