/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/ol@8.1.0/renderer/Map.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Disposable from"../Disposable.js";import{TRUE}from"../functions.js";import{abstract}from"../util.js";import{compose as composeTransform,makeInverse}from"../transform.js";import{getWidth}from"../extent.js";import{shared as iconImageCache}from"../style/IconImageCache.js";import{inView}from"../layer/Layer.js";import{wrapX}from"../coordinate.js";class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){abstract()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,o=e.pixelToCoordinateTransform;composeTransform(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),makeInverse(o,r)}forEachFeatureAtCoordinate(e,t,r,o,a,n,s,i){let c;const l=t.viewState;function m(e,t,r,o){return a.call(n,t,e?r:null,o)}const p=l.projection,f=wrapX(e.slice(),p),h=[[0,0]];if(p.canWrapX()&&o){const e=p.getExtent(),t=getWidth(e);h.push([-t,0],[t,0])}const u=t.layerStatesArray,d=u.length,g=[],C=[];for(let o=0;o<h.length;o++)for(let a=d-1;a>=0;--a){const n=u[a],p=n.layer;if(p.hasRenderer()&&inView(n,l)&&s.call(i,p)){const a=p.getRenderer(),s=p.getSource();if(a&&s){const i=s.getWrapX()?f:e,l=m.bind(null,n.managed);C[0]=i[0]+h[o][0],C[1]=i[1]+h[o][1],c=a.forEachFeatureAtCoordinate(C,t,r,l,g)}if(c)return c}}if(0===g.length)return;const x=1/g.length;return g.forEach(((e,t)=>e.distanceSq+=t*x)),g.sort(((e,t)=>e.distanceSq-t.distanceSq)),g.some((e=>c=e.callback(e.feature,e.layer,e.geometry))),c}hasFeatureAtCoordinate(e,t,r,o,a,n){return void 0!==this.forEachFeatureAtCoordinate(e,t,r,o,TRUE,this,a,n)}getMap(){return this.map_}renderFrame(e){abstract()}flushDeclutterItems(e){}scheduleExpireIconCache(e){iconImageCache.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(e,t){iconImageCache.expire()}export default MapRenderer;
//# sourceMappingURL=/sm/97811c1ea74da6c485cdbbb3b43c16c141d0bf7f2014252cbec2d3320794c10c.map