/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/ol@8.1.0/interaction/DragPan.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import PointerInteraction,{centroid as centroidFromPointers}from"./Pointer.js";import{FALSE}from"../functions.js";import{all,focusWithTabindex,noModifierKeys,primaryAction}from"../events/condition.js";import{easeOut}from"../easing.js";import{rotate as rotateCoordinate,scale as scaleCoordinate}from"../coordinate.js";class DragPan extends PointerInteraction{constructor(t){super({stopDown:FALSE}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const i=t.condition?t.condition:all(noModifierKeys,primaryAction);this.condition_=t.onFocusOnly?all(focusWithTabindex,i):i,this.noKinetic_=!1}handleDragEvent(t){const i=t.map;this.panning_||(this.panning_=!0,i.getView().beginInteraction());const n=this.targetPointers,e=i.getEventPixel(centroidFromPointers(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(e[0],e[1]),this.lastCentroid){const i=[this.lastCentroid[0]-e[0],e[1]-this.lastCentroid[1]],n=t.map.getView();scaleCoordinate(i,n.getResolution()),rotateCoordinate(i,n.getRotation()),n.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=e,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const i=t.map,n=i.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),e=this.kinetic_.getAngle(),o=n.getCenterInternal(),s=i.getPixelFromCoordinateInternal(o),r=i.getCoordinateFromPixelInternal([s[0]-t*Math.cos(e),s[1]-t*Math.sin(e)]);n.animateInternal({center:n.getConstrainedCenter(r),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}export default DragPan;
//# sourceMappingURL=/sm/e3da487adca91d47ff39f9f809dfcef369a1e0fa42378adde32b9e8428308a27.map