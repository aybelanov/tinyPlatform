/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/ol@8.1.0/interaction/PinchRotate.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import PointerInteraction,{centroid as centroidFromPointers}from"./Pointer.js";import{FALSE}from"../functions.js";import{disable}from"../rotationconstraint.js";class PinchRotate extends PointerInteraction{constructor(t){const n=t=t||{};n.stopDown||(n.stopDown=FALSE),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let n=0;const i=this.targetPointers[0],e=this.targetPointers[1],o=Math.atan2(e.clientY-i.clientY,e.clientX-i.clientX);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=t}this.lastAngle_=o;const r=t.map,s=r.getView();s.getConstraints().rotation!==disable&&(this.anchor_=r.getCoordinateFromPixelInternal(r.getEventPixel(centroidFromPointers(this.targetPointers))),this.rotating_&&(r.render(),s.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(t){if(this.targetPointers.length<2){return t.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}export default PinchRotate;
//# sourceMappingURL=/sm/bf156c2d2406890dced6cb2127dff664c31608457487a8df2c3296437ac1eb34.map