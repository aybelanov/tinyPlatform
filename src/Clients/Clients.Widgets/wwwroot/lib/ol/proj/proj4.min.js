/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/ol@8.1.0/proj/proj4.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Projection from"./Projection.js";import{addCoordinateTransforms,addEquivalentProjections,addProjection,createSafeCoordinateTransform,get}from"../proj.js";import{get as getTransform}from"./transforms.js";let registered=null;export function isRegistered(){return!!registered}export function unregister(){registered=null}export function register(e){registered=e;const t=Object.keys(e.defs),r=t.length;let o,s;for(o=0;o<r;++o){const r=t[o];if(!get(r)){const t=e.defs(r);let o=t.units;o||"longlat"!==t.projName||(o="degrees"),addProjection(new Projection({code:r,axisOrientation:t.axis,metersPerUnit:t.to_meter,units:o}))}}for(o=0;o<r;++o){const n=t[o],i=get(n);for(s=0;s<r;++s){const r=t[s],o=get(r);if(!getTransform(n,r))if(e.defs[n]===e.defs[r])addEquivalentProjections([i,o]);else{const t=e(n,r);addCoordinateTransforms(i,o,createSafeCoordinateTransform(i,o,t.forward),createSafeCoordinateTransform(o,i,t.inverse))}}}}let epsgLookup=async function(e){const t=await fetch(`https://epsg.io/${e}.proj4`);if(!t.ok)throw new Error(`Unexpected response from epsg.io: ${t.status}`);return t.text()};export function setEPSGLookup(e){epsgLookup=e}export function getEPSGLookup(){return epsgLookup}export async function fromEPSGCode(e){"string"==typeof e&&(e=parseInt(e.split(":").pop(),10));const t=registered;if(!t)throw new Error("Proj4 must be registered first with register(proj4)");const r="EPSG:"+e;return t.defs(r)||(t.defs(r,await epsgLookup(e)),register(t)),get(r)}export function epsgLookupMapTiler(e){return async function(t){const r=await fetch(`https://api.maptiler.com/coordinates/search/code:${t}.json?transformations=true&exports=true&key=${e}`);if(!r.ok)throw new Error(`Unexpected response from maptiler.com: ${r.status}`);return r.json().then((e=>{const r=e.results;if(r?.length>0){const e=r.filter((e=>"EPSG"===e.id?.authority&&e.id?.code===t))[0];if(e){const t=e.transformations;if(t?.length>0){const r=e.default_transformation;if(t.filter((e=>e.id?.authority===r?.authority&&e.id?.code===r?.code&&0===e.grids?.length)).length>0)return e.exports?.proj4;const o=t.filter((e=>0===e.grids?.length&&"EPSG"===e.target_crs?.authority&&4326===e.target_crs?.code&&!1===e.deprecated&&!0===e.usable)).sort(((e,t)=>e.accuracy-t.accuracy))[0]?.exports?.proj4;if(o)return o}return e.exports?.proj4}}}))}}
//# sourceMappingURL=/sm/cb0d6303e6b7b99bd1058bfdebc2a3038fec6623dc58db95025f8881dc46633e.map