/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/ol@8.1.0/DataTile.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Tile from"./Tile.js";import TileState from"./TileState.js";import{createCanvasContext2D}from"./dom.js";export function asImageLike(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}export function asArrayLike(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}let sharedContext=null;export function toArray(t){sharedContext||(sharedContext=createCanvasContext2D(t.width,t.height,void 0,{willReadFrequently:!0}));const e=sharedContext.canvas,a=t.width;e.width!==a&&(e.width=a);const i=t.height;return e.height!==i&&(e.height=i),sharedContext.clearRect(0,0,a,i),sharedContext.drawImage(t,0,0),sharedContext.getImageData(0,0,a,i).data}const defaultSize=[256,256];class DataTile extends Tile{constructor(t){const e=TileState.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null}getSize(){if(this.size_)return this.size_;const t=asImageLike(this.data_);return t?[t.width,t.height]:defaultSize}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();const t=this;this.loader_().then((function(e){t.data_=e,t.state=TileState.LOADED,t.changed()})).catch((function(e){t.error_=e,t.state=TileState.ERROR,t.changed()}))}}export default DataTile;
//# sourceMappingURL=/sm/b0768d38217ba3b0df38f6fb4f18b3888e107bbeea653a45a8606cccad78e978.map